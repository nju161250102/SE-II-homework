# 灯具进销存管理系统需求规格说明文档v2.3  
## v2.3 正式版  
### 南京大学16级软件学院软工二大作业Orz组 
---
变更记录
---
|修改人员|日期|变更原因|版本号|
|:--|:--|:--|:--|
|全员|2017.9.30|最初草稿|v1.0|
|全员|2017.10.13|增加新用例<br/>修改了部分功能点和刺激/响应序列|v2.0|
|钱美缘，郝睿|2017.10.25|增加了对外接口的界面图|v2.1|
|全员|2018.01.01|整体性细节修改|v2.2|
|郝睿|2018.01.07|针对文档前后一致性进行的整体性细节修改|v2.3|

目录
---
## ![1 引言](#1-引言)
## ![1.1 目的](#11-目的)
## ![1.2 范围](#12-范围)
## ![1.3 参考文献](#13-参考文献)
## ![2 总体描述](#2-总体描述)
## ![2.1 产品前景](#21-产品前景)
### ![2.1.1 背景与机遇](#211-背景与机遇)
### ![2.1.2 业务需求](#212-业务需求)
## ![2.2 产品功能](#22-产品功能)
## ![2.3 用户特征](#23-用户特征)
## ![2.4 约束](#24-约束)
## ![2.5 假设和依赖](#25-假设和依赖)
## ![3 详细需求描述](#3-详细需求描述)
## ![3.1 对外接口需求](#31-对外接口需求)
### ![3.1.1 用户界面](#311-用户界面)
## ![3.2 功能需求](#32-功能需求)
### ![3.2.1 用例1 单据管理](#321-用例1-单据管理)
#### ![3.2.1.1 特性描述](#3211-特性描述)
#### ![3.2.1.2 刺激/响应序列](#3212-刺激/响应序列)
#### ![3.2.1.3 相关功能需求](#3213-相关功能需求)
### ![3.2.2 用例2 商品分类管理](#322-用例2-商品分类管理)
#### ![3.2.2.1 特性描述](#3221-特性描述)
#### ![3.2.2.2 刺激/响应序列](#3222-刺激/响应序列)
#### ![3.2.2.3 相关功能需求](#3223-相关功能需求)
### ![3.2.3 用例3 商品管理](#323-用例3-商品管理)
#### ![3.2.3.1 特性描述](#3231-特性描述)
#### ![3.2.3.2 刺激/响应序列](#3232-刺激/响应序列)
#### ![3.2.3.3 相关功能需求](#3233-相关功能需求)
### ![3.2.4 用例4 库存管理](#324-用例4-库存管理)
#### ![3.2.4.1 特性描述](#3241-特性描述)
#### ![3.2.4.2 刺激/响应序列](#3242-刺激/响应序列)
#### ![3.2.4.3 相关功能需求](#3243-相关功能需求)
### ![3.2.5 用例5 库存调整](#325-用例5-库存调整)
#### ![3.2.5.1 特性描述](#3251-特性描述)
#### ![3.2.5.2 刺激/响应序列](#3252-刺激/响应序列)
#### ![3.2.5.3 相关功能需求](#3253-相关功能需求)
### ![3.2.6 用例6 客户管理](#326-用例6-客户管理)
#### ![3.2.6.1 特性描述](#3261-特性描述)
#### ![3.2.6.2 刺激/响应序列](#3262-刺激/响应序列)
#### ![3.2.6.3 相关功能需求](#3263-相关功能需求)
### ![3.2.7 用例7 制定进货单](#327-用例7-制定进货单)
#### ![3.2.7.1 特性描述](#3271-特性描述)
#### ![3.2.7.2 刺激/响应序列](#3272-刺激/响应序列)
#### ![3.2.7.3 相关功能需求](#3273-相关功能需求)
### ![3.2.8 用例8 制定进货退货单](#328-用例8-制定进货退货单)
#### ![3.2.8.1 特性描述](#3281-特性描述)
#### ![3.2.8.2 刺激/响应序列](#3282-刺激/响应序列)
#### ![3.2.8.3 相关功能需求](#3283-相关功能需求)
### ![3.2.9 用例9 制定销售单](#329-用例9-制定销售单)
#### ![3.2.9.1 特性描述](#3291-特性描述)
#### ![3.2.9.2 刺激/响应序列](#3292-刺激/响应序列)
#### ![3.2.9.3 相关功能需求](#3293-相关功能需求)
### ![3.2.10 用例10 制定销售退货单](#3210-用例10-制定销售退货单)
#### ![3.2.10.1 特性描述](#32101-特性描述)
#### ![3.2.10.2 刺激/响应序列](#32102-刺激/响应序列)
#### ![3.2.10.3 相关功能需求](#32103-相关功能需求)
### ![3.2.11 用例11 银行账户管理](#3211-用例11-银行账户管理)
#### ![3.2.11.1 特性描述](#32111-特性描述)
#### ![3.2.11.2 刺激/响应序列](#32112-刺激/响应序列)
#### ![3.2.11.3 相关功能需求](#32113-相关功能需求)
### ![3.2.12 用例12 制定收付款单](#3212-用例12-制定收付款单)
#### ![3.2.12.1 特性描述](#32121-特性描述)
#### ![3.2.12.2 刺激/响应序列](#32122-刺激/响应序列)
#### ![3.2.12.3 相关功能需求](#32123-相关功能需求)
### ![3.2.13 用例13 制定现金费用单](#3213-用例13-制定现金费用单)
#### ![3.2.13.1 特性描述](#32131-特性描述)
#### ![3.2.13.2 刺激/响应序列](#32132-刺激/响应序列)
#### ![3.2.13.3 相关功能需求](#32133-相关功能需求)
### ![3.2.14 用例14 查看销售明细表](#3214-用例14-查看销售明细表)
#### ![3.2.14.1 特性描述](#32141-特性描述)
#### ![3.2.14.2 刺激/响应序列](#32142-刺激/响应序列)
#### ![3.2.14.3 相关功能需求](#32143-相关功能需求)
### ![3.2.15 用例15 查看经营状况表](#3215-用例15-查看经营状况表)
#### ![3.2.15.1 特性描述](#32151-特性描述)
#### ![3.2.15.2 刺激/响应序列](#32152-刺激/响应序列)
#### ![3.2.15.3 相关功能需求](#32153-相关功能需求)
### ![3.2.16 用例16 查看经营历程表](#3216-用例16-查看经营历程表)
#### ![3.2.16.1 特性描述](#32161-特性描述)
#### ![3.2.16.2 刺激/响应序列](#32162-刺激/响应序列)
#### ![3.2.16.3 相关功能需求](#32163-相关功能需求)
### ![3.2.17 用例17 期初建账](#3217-用例17-期初建账)
#### ![3.2.17.1 特性描述](#32171-特性描述)
#### ![3.2.17.2 刺激/响应序列](#32172-刺激/响应序列)
#### ![3.2.17.3 相关功能需求](#32173-相关功能需求)
### ![3.2.18 用例18 查看日志](#3218-用例18-查看日志)
#### ![3.2.18.1 特性描述](#32181-特性描述)
#### ![3.2.18.2 刺激/响应序列](#32182-刺激/响应序列)
#### ![3.2.18.3 相关功能需求](#32183-相关功能需求)
### ![3.2.19 用例19 审批单据](#3219-用例19-审批单据)
#### ![3.2.19.1 特性描述](#32191-特性描述)
#### ![3.2.19.2 刺激/响应序列](#32192-刺激/响应序列)
#### ![3.2.19.3 相关功能需求](#32193-相关功能需求)
### ![3.2.20 用例20 制定促销策略](#3220-用例20-制定促销策略)
#### ![3.2.20.1 特性描述](#32201-特性描述)
#### ![3.2.20.2 刺激/响应序列](#32202-刺激/响应序列)
#### ![3.2.20.3 相关功能需求](#32203-相关功能需求)
### ![3.2.21 用例21 用户管理](#3221-用例21-用户管理)
#### ![3.2.21.1 特性描述](#32211-特性描述)
#### ![3.2.21.2 刺激/响应序列](#32212-刺激/响应序列)
#### ![3.2.21.3 相关功能需求](#32213-相关功能需求)
## ![3.3 非功能需求](#33-非功能需求)
### ![3.3.1 安全性](#331-安全性)
### ![3.3.2 可维护性](#332-可维护性)
### ![3.3.3 易用性](#333-易用性)
### ![3.3.4 可靠性](#334-可靠性)
### ![3.3.5 业务规则](#335-业务规则)
## ![3.4 约束](#34-约束)
## ![3.5 数据需求](#35-数据需求)
### ![3.5.1 数据定义](#351-数据定义)
### ![3.5.2 默认数据](#352-默认数据)
### ![3.5.3 数据格式要求](#353-数据格式要求)
## ![3.6 其他需求](#36-其他需求)
### ![3.6.1 安装需求](#361-安装需求)
## ![4 需求分析模型](#4-需求分析模型)
## ![4.1 全局概念类图](#41-全局概念类图)
## ![4.2 各用例概念类图](#42-各用例概念类图)
### ![4.2.1 用例1 单据管理](#421-用例1-单据管理)
### ![4.2.2 用例2 商品分类管理](#422-用例2-商品分类管理)
### ![4.2.3 用例3 商品管理](#423-用例3-商品管理)
### ![4.2.4 用例4 库存查看](#424-用例4-库存查看)
### ![4.2.5 用例5 库存盘点](#425-用例5-库存盘点)
### ![4.2.6 用例6 库存调整](#426-用例6-库存调整)
### ![4.2.7 用例7 客户管理](#427-用例7-客户管理)
### ![4.2.8 用例8 制定进货单](#428-用例8-制定进货单)
### ![4.2.9 用例9 制定进货退货单](#429-用例9-制定进货退货单)
### ![4.2.10 用例10 制定销售单](#4210-用例10-制定销售单)
### ![4.2.11 用例11 制定销售退货单](#4211-用例11-制定销售退货单)
### ![4.2.12 用例12 银行账户管理](#4212-用例12-银行账户管理)
### ![4.2.13 用例13 制定收付款单](#4213-用例13-制定收付款单)
### ![4.2.14 用例14 制定现金费用单](#4214-用例14-制定现金费用单)
### ![4.2.15 用例15 查看销售明细表](#4215-用例15-查看销售明细表)
### ![4.2.16 用例16 查看经营状况表](#4216-用例16-查看经营状况表)
### ![4.2.17 用例17 查看经营历程表](#4217-用例17-查看经营历程表)
### ![4.2.18 用例18 期初建账](#4218-用例18-期初建账)
### ![4.2.19 用例19 查看日志](#4219-用例19-查看日志)
### ![4.2.20 用例20 审批单据](#4220-用例20-审批单据)
### ![4.2.21 用例21 制定促销策略](#4221-用例21-制定促销策略)
### ![4.2.22 用例22 用户管理](#4222-用例22-用户管理)
### ![4.2.23 用例23 修改个人信息](#4223-用例23-修改个人信息)
### ![4.2.24 用例24 邮件管理](#4224-用例24-邮件管理)
## ![4.3 各用例系统顺序图](#43-各用例系统顺序图)
### ![4.3.1 用例1 单据管理](#431-用例1-单据管理)
### ![4.3.2 用例2 商品分类管理](#432-用例2-商品分类管理)
### ![4.3.3 用例3 商品管理](#433-用例3-商品管理)
### ![4.3.4 用例4 库存查看](#434-用例4-库存查看)
### ![4.3.5 用例5 库存盘点](#435-用例5-库存盘点)
### ![4.3.6 用例6 库存调整](#436-用例6-库存调整)
### ![4.3.7 用例7 客户管理](#437-用例7-客户管理)
### ![4.3.8 用例8 制定进货单](#438-用例8-制定进货单)
### ![4.3.9 用例9 制定进货退货单](#439-用例9-制定进货退货单)
### ![4.3.10 用例10 制定销售单](#4310-用例10-制定销售单)
### ![4.3.11 用例11 制定销售退货单](#4311-用例11-制定销售退货单)
### ![4.3.12 用例12 银行账户管理](#4312-用例12-银行账户管理)
### ![4.3.13 用例13 制定收付款单](#4313-用例13-制定收付款单)
### ![4.3.14 用例14 制定现金费用单](#4314-用例14-制定现金费用单)
### ![4.3.15 用例15 查看销售明细表](#4315-用例15-查看销售明细表)
### ![4.3.16 用例16 查看经营状况表](#4316-用例16-查看经营状况表)
### ![4.3.17 用例17 查看经营历程表](#4317-用例17-查看经营历程表)
### ![4.3.18 用例18 期初建账](#4318-用例18-期初建账)
### ![4.3.19 用例19 查看日志](#4319-用例19-查看日志)
### ![4.3.20 用例20 审批单据](#4320-用例20-审批单据)
### ![4.3.21 用例21 制定促销策略](#4321-用例21-制定促销策略)
### ![4.3.22 用例22 用户管理](#4322-用例22-用户管理)

## ![4.4 部分用例状态图](#44-部分用例状态图)
### ![4.4.1 用例1 商品分类管理](#441-用例1-商品分类管理)
### ![4.4.2 用例2 商品管理](#442-用例2-商品管理)
### ![4.4.3 用例6 客户管理](#443-用例6-客户管理)
### ![4.4.4 用例7 制定进退货单](#444-用例7-制定进退货单)
### ![4.4.5 用例8 制定销售单](#445-用例8-制定销售单)
### ![4.4.6 用例9 制定销售退货单](#446-用例9-制定销售退货单)
### ![4.4.7 用例10 银行账户管理](#447-用例10-银行账户管理)
### ![4.4.8 用例11-12 制定收付款单](#448-用例11-12-制定收付款单)
### ![4.4.9 用例13 制定现金费用单](#449-用例13-制定现金费用单)
### ![4.4.10 用例14-17 查看统计分析](#4410-用例14-17-查看统计分析)
### ![4.4.11 用例18 期初建账](#4411-用例18-期初建账)
### ![4.4.12 用例20 审批单据](#4412-用例20-审批单据)

## 1 引言
## 1.1 目的
本文档描述了司进销存系统ERPnju的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。除特殊说明之外，本文档所包含的需求都是高优先级需求。  

## 1.2 范围
进销存系统ERPnju是为南京某灯具公司开发的业务系统，开发的目标是用于帮助该商店处理日常的重点业务，包括库存管理、进货销售、财务处理和销售情况汇总。通过进销存系统EPRnju的应用，期望为南京该灯具公司提高进货销售员工工作效率、降低库存运营成本、减少商品报废浪费、提升财务人员工作效率以及减少差错、使得总经理更清晰得了解业务运营、提高销售额和利润。  

## 1.3 参考文献
1、IEEE标准  
2、进销存系统EPRnju用例文档 V1.0

## 2 总体描述
## 2.1 产品前景
### 2.1.1 背景与机遇
南京某灯具公司是一家专门从事灯具照明行业经营的民营企业，该公司是南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作。原先该公司仅财务处理与库存管理方面使用一些简单的办公软件，有以下缺陷：一、销售业务处理效率低下，易出现差错，削弱了其市场竞争力；二、公司各部门，各环节业务配合度较差，常发生库存数据更新不及时，账单更新滞后，增加了公司管理成本；三、总经理不能及时直观了解公司的经营状况，影响长期战略决策。随着规模扩大，简单办公系统已不能满足其业务发展需求。  
进销存系EPRnju就是为满足该南京灯具公司新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常任务，客户端与数据集中服务器才是实时通信的方式完成数据交换。  

### 2.1.2 业务需求
BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%  
BR2：在系统使用6个月后，进货销售人员和财务人员的工作效率提高50%  BR3：在系统使用6个月后，运营成本要降低15%  
范围：人力成本和库存成本  
度量：检查平均员工数量和平均每10,000元销售额的库存成本  
BR4：在系统使用6个月后，销售额度要提高20%  
最好情况：40%  
最可能情况：20%  
最坏情况：10%  

## 2.2 产品功能
SF1 帮助库存管理人员进行商品分类管理的工作  
SF2 帮助库存管理人员进行商品管理的工作  
SF3 帮助库存管理人员进行库存管理的工作  
SF4 帮助库存管理人员建立库存报溢单和库存报损单并提交  
帮助系统管理员进行用户管理的工作  
SF5 集中管理进货商与销售商信息  
SF6 制定各类业务单据，包括进退货单，销售单，销售退货单    
SF7 帮助财务人员管理银行账户信息  
SF8 帮助财务人员制定收付款单和现金费用单  
SF9 帮助财务人员进行期初建账  
SF10 帮助总经理审批单据  
SF11 帮助总经理制定促销策略  
SF12 帮助总经理和财务人员查看日志  
SF13 帮助系统管理员管理用户  

## 2.3 用户特征
|库存管理人员|1到2名。负责对商品分类和商品的信息的管理。能够简单使用办公信息化系统。对新系统基本持积极态度。不希望增加现有工作量。他们需要管理商品分类和商品；需要查看库存在某一个时间段内（以天为单位）的动态；每天都需要盘点当天的库存快照，并且导出为Excel；若查出实际库存与系统库存不一致，还需要提交库存报溢单或库存报损单；需要根据系统中通过的进货单、退货单、销售单、赠送单等与操作库存相关的单据对实际的库存进行相应的操作；需要为每一个商品设置警戒值，接收系统的警报消息并向上级反映，及时补充库存。|
|:--|:--|
|进货销售人员|每个分店有4～8个进货销售人员。他们不仅要负责管理客户，包括进货商和销售商，每天还需要制定大量的业务单据，包括进退货单、销售单和销售退货单。预估计在销售旺季，他们平均每天至少要开据200张单据。因为任务较为频繁，而且涉及钱财事宜以及影响财务和库存，每一张单据都需要精准核对。所以他们对软件系统的依赖很大。进货销售人员的计算机操作技能良好，对系统基本持积极态度，但不希望增加现有工作量。希望新系统能简化他们手工开据单据的流程，并避免错误发生|
|财务人员|1到2名。他们负责管理公司的银行账户信息，并且对公司的资金出入情况制作单据入账。他们需要填写大量的单据，其中不乏一些重复的内容。填写单据时金额需要自己仔细核对，之后需要送给总经理批准。并且他们需要定期了解公司的经营状况。财务人员的办公信息化系统较强，对新的进销存系统持积极乐观的态度，希望新系统能帮助他们减轻工作负担。|
|总经理|2名。他们经常使用系统。他们需要登录。他们不仅要负责对所有生成的单据进行查看、修改、审批，还需要负责查看销售明细表、经营历程表、经营情况表以及制定促销策略。能够熟练使用办公信息化系统。对系统持积极态度，希望系统能帮助他们减轻工作负担。|
|系统管理员|1名。负责对系统用户及其信息的管理。能够熟练使用办公信息化系统。对新系统保持积极态度。希望减少工作量减轻负担。在公司相关员工出现变动时需要对系统的用户列表进行增删改查工作。|

## 2.4 约束
* CON1：系统将运行在windows XP/7/8/10和MacOS上 
* CON2：系统不使用Web界面，而是图形界面。
* CON3：项目使用持续集成方法进行开发。
* CON4：在开发中，开发者要提交需求规格说明文档、体系结构设计文档和测试报告。
* CON5：采用Java语言进行开发。

## 2.5 假设和依赖
* AE1：系统管理员初始账号和密码均为admin
* AE2：收付款单的制定和进出库单据无关
* AE3：客户可以同时是供应商和销售商
* AE4：假设只有一个默认仓库
* AE5：假设制定的单据能尽快通过审批

## 3 详细需求描述
## 3.1 对外接口需求
### 3.1.1 用户界面
UI1 通用界面：系统提供可视化的Form界面，帮助用户进行通用操作。  
UI1.1 通用-用户登录界面：当操作人员打开该系统时，系统显示登录界面。界面图示为：  
![](doc/img/UI/登录界面.png)  
UI1.2 通用-用户主界面：当操作人员登录成功后，系统显示系统主界面。界面图示为：  
![](doc/img/UI/主界面.png)  
UI2 库存管理人员界面：系统使用Form风格界面，帮助库存管理人员使用界面处理库存业务。  
UI2.1 商品分类管理界面：当库存管理人员点击商品分类管理时，系统应当显示商品分类管理界面。界面图示为：  
![](doc/img/UI/商品分类管理.png)  
UI2.2 商品管理界面：当库存管理人员点击商品管理时，系统应当显示商品管理界面。界面图示为：  
![](doc/img/UI/商品管理.png)  
UI2.3 库存查看界面：当库存管理人员点击库存查看时，系统应当显示库存查看界面。界面图示为：  
![](doc/img/UI/库存查看.png)
UI2.4 库存盘点界面：当库存管理人员点击库存盘点时，系统应当显示库存盘点界面。界面图示为：  
![](doc/img/UI/库存盘点.png)   
UI2.5 库存调整界面：当库存管理人员点击报溢/报损时，系统应当显示库存调整界面。界面图示为：  
![](doc/img/UI/库存调整.png)  
UI3 进货销售人员主界面：系统使用Form风格界面，帮助进货销售人员使用界面处理进货与销售的业务。  
UI3.1 客户管理界面：当进货销售人员点击客户管理时，系统应当显示客户管理界面。界面图示为：  
![](doc/img/UI/客户管理.png)  
UI3.2 制定进货单界面：当进货销售人员点击制定进货单时，系统应当显示制定进货单界面。界面图示为：  
![](doc/img/UI/制定进货单.png)  
UI3.3 制定进货退货单界面：当进货销售人员点击制定进货退货单时，系统应当显示制定进货退货单界面。界面图示为：  
![](doc/img/UI/制定进货退货单.png)
UI3.4 制定销售单界面：当进货销售人员点击制定销售单时，系统应当显示制定销售单界面。界面图示为：  
![](doc/img/UI/制定销售单.png)   
UI3.5 制定销售退货单界面：当进货销售人员点击制定销售退货单时，系统应当显示制定销售退货单界面。界面图示为：  
![](doc/img/UI/制定销售退货单.png)  
UI4 财务人员主界面：系统使用Form风格界面，帮助进货销售人员使用界面处理财务方面的业务。
UI4.1 账户管理界面：当财务人员点击账户管理时，系统应当显示账户管理界面。界面图示为：  
![](doc/img/UI/账户管理.png)  
UI4.2 制定收付款单界面：当财务人员点击制定收付款单时，系统应当显示制定收付款单界面。界面图示为：  
![](doc/img/UI/制定进货单.png)  
UI4.3 制定现金费用单界面：当财务人员点击制定现金费用单时，系统应当显示制定现金费用单界面。界面图示为：  
![](doc/img/UI/制定现金费用单.png)
UI4.4 查看销售明细表界面：当财务人员点击查看销售明细表时，系统应当显示查看销售明细表界面。界面图示为：  
![](doc/img/UI/查看销售明细表.png)   
UI4.5 查看经营历程表界面：当财务人员点击查看经营历程表时，系统应当显示查看经营历程表界面。界面图示为：  
![](doc/img/UI/查看经营历程表.png)  
UI4.6 查看经营状况表界面：当财务人员点击查看经营状况表时，系统应当显示查看经营状况表界面。界面图示为：  
![](doc/img/UI/查看经营状况表.png)  
UI4.6 期初建账界面：当财务人员点击期初建账时，系统应当显示期初建账界面，默认为显示商品信息界面。界面图示为：  
![](doc/img/UI/期初建账1.png)  
点击客户信息时显示查看客户信息界面，界面图示为：   
![](doc/img/UI/期初建账2.png)  
点击客户信息时显示查看账户信息界面，界面图示为：   
![](doc/img/UI/期初建账3.png)  
UI4.7 查看日志界面：当财务人员点击查看日志时，系统应当显示查看日志界面。界面图示为：  
![](doc/img/UI/查看日志.png)  
UI5 总经理界面：系统使用Form风格界面，帮助总经理使用界面进行查看统计分析和日志等业务。  
UI5.1 审批单据界面：当总经理点击审批单据时，系统应当显示审批单据界面，界面图示为：  
![](doc/img/UI/审批单据.png)  
UI5.2 查看销售明细表界面：当总经理点击查看销售明细表时，系统应当显示查看销售明细表界面，见UI4.4  
UI5.3 查看经营历程表界面：当总经理点击查看经营历程表时，系统应当显示查看经营历程表界面，见UI4.5    
UI5.4 查看经营状况表界面：当总经理点击查看经营状况表时，系统应当显示查看经营状况表界面。见UI4.6  
UI5.5 制定促销策略界面：当总经理点击制定促销策略时，系统应当显示查看制定促销策略界面。界面图示为：  
![](doc/img/UI/制定促销策略.png)  
UI5.6 查看日志界面：当总经理点击查看日志时，系统应当显示查看日志界面，见UI4.7    
UI6 系统管理员界面：系统使用Form风格界面，帮助系统管理员完成对用户信息的管理和权限的修改  
![](doc/img/UI/用户管理.png)    


## 3.2 功能需求
### 3.2.1 用例1 单据管理
#### 3.2.1.1 特性描述
进货销售人员、财务人员、库存管理人员经过系统身份验证和识别后可以查看已制定的单据，并对单据进行查看、修改、删除等管理操作。  

#### 3.2.1.2 刺激/响应序列
刺激：操作人员登录成功进入系统界面 
响应：系统返回特定单据信息表格  
刺激：操作人员请求修改单据内容  
响应：系统判断单据状态，允许操作人员对除通过状态以外的单据进行编辑  
刺激：操作人员请求删除单据  
响应：系统判断单据状态，允许操作人员对除通过状态以外的单据进行删除  
刺激：操作人员请求保存操作结果  
响应：系统更新并保存新的单据信息  
刺激：操作人员请求取消当前操作  
响应：系统退回到当前操作前的状态    

#### 3.2.1.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|BillManage.Input|系统应该允许操作人员在单据管理任务中进行键盘输入|
|BillManage.Choose|系统允许在列表中选择单据并返回单据详细信息|
|BillManage.Enquiry.Modify|当操作人员请求修改单据时，系统启用编辑，参见BillManage.Modify|
|BillManage.Enquiry.Delete|当操作人员请求删除单据时，系统删除该单据|
|BillManage.Del.isRatified|当单据处于已审批完成的状态时，系统不提供删除操作|
|BillManage.Modify.Null|当操作人员没有对客户信息进行任何更改时，系统不进行更新处理|
|BillManage.Modify.isRatified|当单据处于已审批完成的状态时，系统不提供修改操作|
|BillManage.Modify.Cancel|当操作人员取消修改时，系统关闭编辑修改任务，返回单据列表|

### 3.2.2 用例2 商品分类管理
#### 3.2.2.1 特性描述
通过验证的库存管理员对商品分类进行增删改操作。  
优先级 = 高  

#### 3.2.2.2 刺激/响应序列  
刺激：库存管理员请求查看一个分类的信息  
响应：系统显示该分类信息(参照用例文档4.2-正常流程1.0)  
刺激：库存管理员请求在选中分类下新增分类  
响应：系统显示新建分类页面  
刺激：库存管理员完成新页面的信息填写（参照用例文档4.2-正常流程1.1）并点击确认  
响应：系统新建该分类并更新分类列表  
刺激：库存管理员请求删除选中分类  
响应：系统显示确认删除页面  
刺激：库存管理员确认删除  
响应：系统删除该分类  
刺激：库存管理员请求修改选中分类的信息  
响应：系统显示修改分类信息页面  
刺激：库存管理员填入信息（参照用例文档4.2-正常流程1.3）并确认  
响应：系统修改相关信息并更新列表  
刺激：库存管理员选择取消当前操作  
响应：系统退回到当前操作前的状态  
刺激：库存管理员选择退出商品分类管理  
响应：系统返回库存管理员登录成功界面  

#### 3.2.2.3 相关功能需求
|编号|需求描述|
|:---|:---|
|ClassManage.View|系统允许库管选择一个节点|
|ClassManage.View.Show|系统展示选中节点的信息(参照用例文档4.2-正常流程1.0)|
|ClassManage.View.Add|系统允许库管增加在选中节点下增加一个分类，详见ClassManage.Add|
|ClassManage.View.Delete|系统允许库管删除选中节点，详见ClassManage.Delete|
|ClassManage.View.Modify|系统允许库管修改选中节点的信息，详见ClassManage.Modify|
|ClassManage.Add.Input|系统要求库管输入新分类信息（参照用例文档4.2-正常流程1.1）|
|ClassManage.Add.Cancel|库管取消操作，系统取消添加操作|
|ClassManage.Add.Return|系统生成一个分类编号，更新分类|
|ClassManage.Add.Conflict|系统显示名称冲突|
|ClassManage.Add.Invalid|系统显示该分类下已有商品，无法操作|
|ClassManage.Delete.Confirm|系统提示要求获得库管确认|
|ClassManage.Delete.Cancel|系统取消|
|ClassManage.Delete.OK|系统提示操作成功，更新分类|
|ClassManage.Delete.Invalid|系统提示该分类已有商品无法删除|
|ClassManage.Modify.Input|系统要求库管输入该分类的新信息（参照用例文档4.2-正常流程1.3）|
|ClassManage.Modify.Cancel|库管取消，系统取消|
|ClassManage.Modify.Return|系统显示操作成功，更新分类|
|ClassManage.Modify.Conflict|系统显示信息冲突|
|ClassManage.Quit|系统返回库管登录成功界面|

### 3.2.3 用例3 商品管理
#### 3.2.3.1 特性描述
通过身份验证的库存管理员对一个商品列表中的商品进行增删改查操作。  
优先级 = 高
		
#### 3.2.3.2 刺激/响应序列
刺激：库管请求查看商品列表  
响应：系统显示商品列表(详见用例文档4.3-正常流程1.0)  
刺激：库管请求在当前列表中新增一个商品  
响应：系统显示新增商品页面  
刺激：库管填入新商品信息(详见用例文档4.3-正常流程1.1)并提交  
响应：系统新增该商品并更新列表  
刺激：库管在含有商品分类的节点下添加商品
响应：系统提示当前节点含有商品分类，无法添加商品
刺激：库管请求删除一个商品  
响应：系统显示确认删除页面  
刺激：库管确认删除  
响应：系统删除商品并更新列表 
刺激：库管选择的商品库存不为0
响应：系统提示无法删除 
刺激：库管请求修改一个商品的信息(详见用例文档4.3-正常流程1.3)  
响应：系统显示修改商品信息页面  
刺激：库管填入相关信息并提交  
响应：系统修改相关信息并更新列表  
刺激：库管请求搜索商品  
响应：系统显示搜索框  
刺激：库管键入商品名或商品编号开始搜索  
响应：系统显示搜索结果页面  
刺激：库管输入的商品名或商品编号非法
响应：系统显示输入无效，无法查找
刺激：库管选择取消当前操作  
响应：系统退回到当前操作前的状态  
刺激：库管选择退出商品管理  
响应：系统返回库管登录成功界面  
		
#### 3.2.3.3 相关功能需求
|编号|需求描述|
|:---|:---|
|ItemsManage.View|系统允许库管查看商品信息|
|ItemsManage.View.Show|系统显示所有商品信息(详见用例文档4.3-正常流程1.0)|
|ItemsManage.View.Add|系统允许库管添加商品，详见ItemsManage.Add|
|ItemsManage.Select|系统允许库管选中一个商品|
|ItemsManage.View.Delete|系统允许库管删除商品，详见ItemsManage.Delete|
|ItemsManage.View.Modify|系统允许库管修改商品信息，详见ItemsManage.Modify|
|ItemsManage.View.Search|系统允许库管查询某商品，详见ItemsManage.Search|
|ItemsManage.Add.Input|系统要求库管输入新增商品信息(详见用例文档4.3-正常流程1.1)|
|ItemsManage.Add.Cancel|库管取消，系统取消操作|
|ItemsManage.Add.Conflict|系统显示商品冲突|
|ItemsManage.Add.Invalid|系统显示无法在当前节点添加商品|
|ItemsManage.Add.Return|系统显示操作成功，更新商品列表|
|ItemsManage.Delete.Confirm|系统要求库管确认删除该商品|
|ItemsManage.Delete.Cancel|系统取消|
|ItemsManage.Delete.OK|系统删除该商品，更新列表|
|ItemsManage.Delete.Invalid|系统提示库存不为0，无法删除|
|ItemsManage.Modify.Input|系统要求库管输入选中商品的新信息(详见用例文档4.2-正常流程1.3)|
|ItemsManage.Modify.Conflict|系统提示商品信息冲突|
|ItemsManage.Modify.Cancel|库管取消修改，系统取消操作|
|ItemsManage.Modify.Return|系统显示操作成功，更新商品信息|
|ItemsManage.Search.Input|系统要求库管输入商品名或商品编号|
|ItemsManage.Search.Invalid|系统显示输入的编号无效|
|ItemsManage.Search.Return|系统显示查询结果|
|ItemsManage.Search.Quit|库管要求退出查询，系统退出查询|
|ItemsManage.Quit|系统返回库管登录成功界面|

### 3.2.4 用例4 库存查看
#### 3.2.4.1 特性描述
通过身份验证的库存管理员对库存进行查看工作。 
优先级 = 中
		
#### 3.2.4.2 刺激/响应序列
刺激：库管请求查看库存动态  
响应：系统显示库存动态查看页面  
刺激：库管输入时间段，请求查看  
响应：系统显示该时间段内库存的动态(详见用例文档4.4-正常流程1.0)  
刺激：库管选择退出库存查看     
响应：系统返回库管登录成功界面  
		
#### 3.2.4.3 相关功能需求
|编号|需求描述|
|:---|:---|
|StoreCheck.View|允许库管查看库存动态|
|StoreCheck.View.Input|系统要求库管输入一个时间段|
|StoreCheck.View.Return|系统显示查询结果(详见用例文档4.4-正常流程1.0)|
|StoreCheck.Quit|系统返回库管登录成功界面|

### 3.2.5 用例5 库存盘点
#### 3.2.5.1 特性描述
通过身份验证的库存管理员对库存进行盘点工作。 
优先级 = 中
		
#### 3.2.5.2 刺激/响应序列
刺激：库管请求查看当前的库存状况  
响应：系统显示当前的库存快照(详见用例文档4.5-正常流程1.0)  
刺激：库管请求将快照导出到Excel  
响应：导出文件并显示导出成功页面 
刺激：库管选择退出库存管理    
响应：系统返回库管登录成功界面   

#### 3.2.5.3 相关功能需求
|编号|需求描述|
|:---|:---|
|StoreInventory.Check|允许库管查看库存盘点|
|StoreInventory.Check.Return|系统显示当前库存快照(详见用例文档4.3-正常流程1.1)|
|StoreInventory.Check.Excel|允许库管导出库存快照到Excel|
|StoreInventory.Check.Excel.Output|系统生成Excel表格|
|StoreInventory.Quit|系统返回库管登录成功界面|

### 3.2.6 用例6 库存调整
#### 3.2.6.1 特性描述
通过身份验证的库存管理员对库存进行报溢报损。  
优先级 = 低

#### 3.2.6.2 刺激/响应序列
刺激：库管请求库存报溢  
响应：系统显示库存报溢单页面  
刺激：库管输入相关数据(详见用例文档4.6-正常流程1.0)并提交  
响应：系统将库存报溢单提交给总经理审批  
刺激：库管请求库存报损  
响应：系统显示库存报损单页面  
刺激：库管输入相关数据(详见用例文档4.6-正常流程1.1)并提交  
响应：系统将库存报损单提交给总经理审批   
刺激：库管数据输入错误
响应：系统提示数据输入错误
刺激：库管选择取消当前操作  
响应：系统退回到当前操作前的状态  
刺激：库管选择退出库存调整    
响应：系统返回库管登录成功界面  
	
#### 3.2.6.3 相关功能需求
|编号|用例描述|
|:---|:---|
|InventoryManage.Overflow|系统允许库管进行库存报溢|
|Inventory.Overflow.Input|系统要求库管选择多出的商品名称，填写数量(详见用例文档4.6-正常流程1.0)|
|Inventory.Overflow.Bills|系统生成库存报溢单|
|Inventory.Underflow|系统允许库管进行库存报损|
|Inventory.Underflow.Input|系统要求库管选择缺少的商品名称，填写数量(详见用例文档4.4-正常流程1.1)|
|Inventory.Underflow.Bills|系统生成库存报损单|
|Inventory.Underflow.Invalid|库管数据输入错误，系统提示数据输入错误|
|Inventory.Quit|系统返回库管登录成功界面|

### 3.2.7 用例7 客户管理
#### 3.2.7.1 特性描述
在发生客户信息变动时，一个经过验证的管理员可以调整客户，增加新客户，移除失效客户，变更客户信息。系统最后要更新变动的客户信息。  
优先级=中

#### 3.2.7.2 刺激/响应序列
刺激：进销人员输入客户关键字或编号  
响应：系统返回查询结果  
刺激：进销人员输入客户关键字或编号所查询的客户不在客户列表中
响应：系统询问是否添加客户
刺激：进销人员申请修改或删除该客户  
响应：系统执行相关任务
刺激：进销人员删除应收或应付大于0的客户
响应：系统提示不能删除
刺激：进销人员对客户信息编辑不合法
响应：系统提示编辑错误  
刺激：进销人员编辑应付与权限级别不相符
响应：系统提示错误
刺激：进销人员申请添加新客户  
响应：系统执行请求 
刺激：进销人员选择取消当前操作  
响应：系统退回到当前操作前的状态 
刺激：进销人员选择退出客户管理  
响应：系统返回进销人员登录成功界面  

#### 3.2.7.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|CustomerManage.Input|系统应该允许进销人员在客户管理任务中进行键盘输入|
|CustomerManage.Input.Enquiry|当进销人员发出查询命令时，系统要返回查询结果的列表，参见CustomerManage.Enquiry|
|CustomerManage.Input.Add|当进销人员输入添加客户命令时，系统进入编辑模式并执行添加任务，参见CustomerManage.Add|
|CustomerManage.Input.Del|当进销人员输入删除客户命令时，系统执行删除客户任务，返回更新后列表|
|CustomerManage.Input.Del.Invalid|当进销人员想要删除的客户的应收或应付大于0时，系统提示不能删除|
|CustomerManage.Input.Update|当进销人员输入更新客户信息命令时，系统进入编辑模式并执行保存更新客户信息任务，返回更新后列表，参见CustomerManage.Update|
|CustomerManage.Enquiry.Null|当进销人员输入客户关键字或编号所查询的客户不在客户列表中时，系统询问是否添加新客户|
|CustomerManage.Enquiry.Choose|系统允许在客户列表中选择客户并返回客户详细信息|
|CustomerManage.Enquiry.Cancel|当进销人员取消查询时，系统返回至客户信息列表|
|CustomerManage.Enquiry.Add|当进销人员选择添加命令时，系统进入添加客户任务，参见CustomerManage.Add|
|CustomerManage.Enquiry.Update|当进销人员对所查询客户选择更新信息命令时，系统启用编辑，参见CustomerManage.Update|
|CustomerManage.Add.Null|当进销人员没有编辑任何信息时，系统不做任何处理|
|CustomerManage.Add.InvalidInfo|当进销人员编辑的信息不合法，比如编号开头的标识不合规或信息不完善时，系统提示错误|
|CustomerManage.Add.InvalidPayment|当进销人员编辑应付与权限级别不相符时，系统提示错误|
|CustomerManage.Add.Cancel|当进销人员取消添加时，系统关闭编辑添加任务，返回客户列表|
|CustomerManager.Update.Null|当进销人员没有对客户信息进行任何更改时，系统不进行更新处理|
|CustomerManager.Update.Invalid|当进销人员编辑的更改不合法或信息不完善时，系统提示相应的错误|
|CustomerManage.Update.InvalidPayment|当进销人员对应付额度编辑的更改与权限级别不匹配时，系统提示错误|
|CustomerManage.Update.Cancel|当进销人员取消更新时，系统关闭编辑更新任务，返回客户列表|
|CustomerManage.Quit|系统返回进销人员登录成功界面|

### 3.2.8 用例8 制定进货单
#### 3.2.8.1 特性描述
在产生进货业务后，一个经过验证的进货销售人员可以新建一张进货单，并选择商品添加到单据中。系统最后储存单据。  
优先级=高   

#### 3.2.8.2 刺激/响应序列
刺激：进销人员请求新建一份进货单据  
响应：系统返回自动排序生成的单号以及自动填充的操作人信息  
刺激：进销人员选择供应商  
响应：系统显示供应商的编号和姓名  
刺激：进销人员选择商品名称  
响应：系统返回该商品详细信息  
刺激：进销人员输入商品数量，单价和入库仓库  
响应：系统自动填充商品编号、型号以及进行单项商品的总额合计  
刺激：进销人员填写备注以及确认添加  
响应：系统将该项商品添加至入库商品列表  
刺激：进销人员选择删除选中的某项商品  
响应：系统返回更新后的入库商品列表  
刺激：进销人员选择已添加完成  
响应：系统对账单进行结算  
刺激：进销人员填写备注并确认提交  
响应：系统提交该进货单  
刺激：进销人员选择取消填写该单据  
响应：系统删除该单据    
刺激：进销人员选择保存该单据  
响应：系统保存该单据  
刺激：进销人员选择退出制定进货单  
响应：系统返回进销人员登录成功界面  

#### 3.2.8.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|PurchaseBill.New|在进销人员请求新建一份进货单时，系统自动根据排序生成单号|
|PurchaseBill.New.ChooseCustomer|系统允许进销人员输入供应商信息(操作人信息自动生成)|
|PurchaseBill.Goods.List|在进销人员请求添加进货商品时，系统显示商品列表界面|
|PurchaseBill.Goods.Info|在进销人员选择某一商品名称时，系统返回该商品的详细信息|
|PurchaseBill.Goods.Calculate|在进销人员输入商品数量和单价后,系统自动填充商品编号、型号以及进行总额合计|
|PurchaseBill.Goods.Add|在进销人员填写完备注并确认后，系统将该项商品添加到出库商品列表中并返回出库商品列表|
|PurchaseBill.Goods.Del|在进销人员选择删除入库商品列表中某项商品时，系统执行删除任务|
|PurchaseBill.Calculate|在进销人员确认完成商品选择时系统对单据进行总额合计|
|PurchaseBill.Commit|在进销人员填写单据备注并确认提交之后，系统将提交该进货单|
|PurchaseBill.Save|在进销人员选择保存单据之后，系统将保存该进货单|
|PurchaseBill.Cancel|在进销人员选择撤销单据时，系统删除该单据|
|PurchaseBill.Quit|系统返回进销人员登录成功界面|

### 3.2.9 用例8 制定进货退货单
#### 3.2.9.1 特性描述
在产生进货退货业务后，一个经过验证的进货销售人员可以新建一张进货退货单，并选择商品添加到单据中。系统最后储存单据。  
优先级=高  

#### 3.2.9.2 刺激/响应序列
刺激：进销人员请求新建一份进货退货单据  
响应：系统返回自动排序生成的单号以及自动填充的操作人信息  
刺激：进销人员选择供应商    
响应：系统显示供应商编号和姓名    
刺激：进销人员选择商品名称  
响应：系统返回该商品详细信息  
刺激：进销人员输入出库商品数量和单价    
响应：系统自动填充商品编号、型号、出库仓库以及自动计算总金额  
刺激：进销人员填写备注以及确认添加  
响应：系统将该项商品添加至出库商品列表  
刺激：系统选择删除选中的某项商品  
响应：系统返回更新后的出库商品列表  
刺激：进销人员选择已添加完成  
响应：系统对账单进行结算  
刺激：进销人员填写备注并确认提交  
响应：系统提交该进货退货单  
刺激：进销人员选择取消填写该单据  
响应：系统删除该单据  
刺激：进销人员选择保存该单据  
响应：系统保存该单据 
刺激：进销人员选择退出制定进货退货单  
响应：系统返回进销人员登录成功界面  

#### 3.2.9.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|PurchaseReturnBill.New|在进销人员请求新建一份进货退货单时，系统自动根据排序生成单号|
|PurchaseReturnBilll.New.ChooseCustomer|系统允许进销人员输入供应商信息（操作人信息自动生成）|
|PurchaseReturnBill.Goods.List|在进销人员请求添加退货商品时，系统显示商品列表界面|
|PurchaseReturnBill.Goods.Info|在进销人员选择某一商品名称时，系统返回该商品的详细信息|
|PurchaseReturnBill.Goods.Calculate|在进销人员输入商品数量和单价后,系统自动填充商品编号、型号、出库仓库以及单项商品总额合计|
|PurchaseReturnBill.Goods.Add|在进销人员填写完备注并确认后，系统将该项商品添加到出库商品列表中并返回出库商品列表|
|PurchaseReturnBill.Goods.Del|在进销人员选择删除出库商品列表中某项商品时，系统执行删除任务|
|PurchaseReturnBill.Calculate|在进销人员确认完成商品选择时系统对单据总额进行结算|
|PurchaseReturnBill.Confirm|在进销人员填写单据备注并确认提交之后，系统提交单据|
|PurchaseReturnBill.Save|在进销人员选择保存单据时，系统保存该单据|
|PurchaseReturnBill.Cancel|在进销人员选择撤销单据时，系统删除该单据|
|PurchaseReturnBill.Quit|系统返回进销人员登录成功界面|

### 3.2.10 用例10 制定销售单
#### 3.2.10.1 特性描述
在产生一笔销售事务后，一个经过验证的进货销售人员可以新建一张销售单，并选择商品添加到单据中。系统最后储存单据并上传等待审批。  
优先级=高  

#### 3.2.10.2 刺激/响应序列
刺激：销售人员申请新建销售单  
响应：系统返回自动排序生成的单号以及自动填充的操作人信息  
刺激：进销人员选择销售商  
响应：系统显示销售商的编号和姓名    
刺激：进销人员选择商品名称  
响应：系统返回该商品详细信息  
刺激：进销人员输入出货数量和单价    
响应：系统自动填充该商品编号、名称、型号、总数量、出货仓库、自动计算生成总额  
刺激：进销人员输入备注并确认添加  
响应：系统返回出货商品列表  
刺激：进销人员选择删除选中的出货商品  
响应：系统返回更新后的出货商品列表  
刺激：进销人员确认选择完成  
响应：系统处理销售单  
刺激：进销人员输入折让、代金券  
响应：系统自动计算折让后总额  
刺激：进销人员输入备注并确认提交  
响应：系统提交该销售单  
刺激：进销人员选择保存该单据  
响应：系统保存该单据
刺激：进销人员选择取消填写该单据  
响应：系统删除该单据  
刺激：进销人员选择退出制定销售单  
响应：系统返回进销人员登录成功界面 
刺激：进销人员输入的折让超过其权限允许的额度  
响应：系统提示操作人员权限不足，拒绝输入  

#### 3.2.10.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|SaleBill.New|在进销人员请求新建一份销售单时，系统根据当日排序生成单号|
|SaleBill.New.ChooseCustomer|系统允许进销人员输入客户信息（操作人信息自动生成）|
|SaleBill.Goods.List|在进销人员请求添加出货商品时，系统显示商品列表界面|
|SaleBill.Goods.Info|在进销人员选中商品后，系统返回该商品的详细信息|
|SaleBill.Goods.Calculate|在进销人员输入出货数量和单价后，系统返回商品编号、名称、型号、总数量、出货仓库，并自动计算生成总额|
|SaleBill.Goods.Add|在进销人员输入商品备注并确认添加后，系统返回已添加商品列表|
|SaleBill.Goods.Del|在进销人员请求删除出库商品清单中某一商品时，系统执行删除任务并返回更新后的已选商品列表|
|SaleBill.Calculate.BeforeDiscount|在进销人员确认已添加完成后，系统初步计算销售单折让前总额|
|SaleBill.Calculate.AfterDiscount|在进销人员输入折让与代金券后，系统计算销售单折让后总额|
|SaleBill.Confirm|进销人员输入备注并确认提交后，系统提交该销售单|
|SaleBill.Calculate.InvalidDiscount|进销人员输入的折让超过其权限允许的额度时，系统提示操作人员权限不足，拒绝输入|
|SaleBill.Save|在进销人员选择保存单据时，系统保存该单据|
|SaleBill.Cancel|在进销人员选择撤销销售单时，系统删除该单据|
|SaleBill.Quit|系统返回进销人员登录成功界面|


### 3.2.11 用例11 制定销售退货单
#### 3.2.11.1 特性描述
在产生一笔退货事务后，一个经过验证的进货销售人员可以新建一张销售退货单，并选择商品添加到单据中。系统最后储存单据并上传等待审批。  
优先级=高  

#### 3.2.11.2 刺激/响应序列
刺激：进销人员请求新建销售退货单  
响应：系统返回根据排序生成的单号以及自动填充的操作人信息  
刺激：进销人员选择销售商  
响应：系统显示销售商的编号和姓名  
刺激：销售人员选择被退货的商品的名称并填写数量和单价  
响应：系统返回该商品入库仓库、总价与折后总价，自动计算应退款总金额  
刺激：进销人员选择的商品不在源销售单中
响应：系统提示并拒绝输入
刺激：进销人员输入备注以及确认添加  
响应：系统返回已添加的被退货商品列表，并计算应退款总金额  
刺激：进销人员选择删除选中的退货商品  
响应：系统返回更新后的退货商品列表  
刺激：进销人员输入备注并确认提交   
响应：系统提交该销售退货单 
刺激：进销人员选择保存该单据  
响应：系统保存该单据 
刺激：进销人员选择取消填写该单据  
响应：系统删除该单据  
刺激：进销人员选择退出制定销售退货单  
响应：系统返回进销人员登录成功界面  

#### 3.2.11.3 相关功能需求
|编号|需求描述与度量|
|:--|:--|
|ReturnBill.New|在进销人员请求新建一份销售退货单时，系统返回自动排序生成的单号|
|ReturnBill.New.ChooseCustomer|系统允许进销人员输入客户信息（操作人信息自动生成）|
|ReturnBill.Goods.Info|在进销人员请求查看客户已购商品时，系统返回已购商品信息列表|
|ReturnBill.Goods.Calculate|在进销人员选定被退货商品并填写数量和单价后，系统显示该商品入库仓库、总价以及折后价，并自动计算应退款总金额|
|ReturnBill.Goods.Add|在进销人员输入备注并确认添加后，系统显示已添加退货商品列表|
|ReturnBill.Goods.Invalid|在进销人员选择的商品不在源销售单中时，系统提示并拒绝输入|
|ReturnBill.Goods.Del|在进销人员请求删除退货商品列表中商品时，系统执行删除任务，并返回更新的列表|
|ReturnBill.Calculate|在进销人员确认结束商品添加后，系统计算应退款总金额并显示|
|ReturnBill.Confirm|进销人员输入备注并确认提交后，系统提交该销售退货单|
|ReturnBill.Save|在进销人员选择保存销售退货单时，系统保存该单据|
|ReturnBill.Cancel|在进销人员选择撤销销售退货单时，系统删除该单据|
|ReturnBill.Quit|系统返回进销人员登录成功界面|

### 3.2.12 用例12 银行账户管理
#### 3.2.12.1 特性描述
拥有最高权限的财务人员对公司银行账户进行管理，包括对账户的增加、修改、删除、查询。  
优先级=中

#### 3.2.12.2 刺激/响应序列
刺激：最高权限的财务人员输入账户名称  
响应：系统显示所查询的账户的账号和余额  
刺激：财务人员输入非法或者财务账户不存在时
响应：系统返回查找账户的初始界面
  
刺激：财务人员选择新增账户  
响应：系统显示新增账户界面  
刺激：财务人员输入增加的账户名称、账号和金额，并确认添加账户  
响应：系统显示添加成功消息并更新账户  
刺激：财务人员账户输入错误(为空或已经存在时)
响应：系统提示无法增加账户
  
刺激：财务人员选择要删除的账户进行删除操作  
响应：系统显示删除确认界面  
刺激：财务人员选择删除的账户余额不为零
响应：系统显示无法删除
刺激：财务人员确认删除  
响应：系统显示删除成功消息并更新数据  
  
刺激：财务人员选择指定账户  
响应：系统显示待修改账户所有信息  
刺激：系统输入账户的新信息（余额不可修改）  
响应：系统显示确认界面并等待确认  
刺激：财务人员账户输入错误(为空或已经存在时)
响应：系统提示无法修改
刺激：财务人员选择确认更改  
响应：系统显示修改成功消息并更新账户数据

刺激：财务人员选择取消当前操作  
响应：系统退回到当前操作前的状态

刺激：财务人员选择退出银行账户管理  
响应：系统返回财务人员登录成功界面   

#### 3.2.12.3 相关功能需求
|Account.Input|系统允许财务人员在银行账户管理中进行键盘输入|
|:---|:---|
|Account.Input.Add|在财务人员请求新增一个银行账户时，系统要执行增加账户功能，参见Account.Add|
|Account.Input.Remove|在财务人员请求删除一个银行账户时，系统执行删除账户功能，参见Account.Remove|
|Account.Input.Modify|在财务人员请求修改银行账户的信息时，系统执行修改账户功能，参见Account.Modify|
|Account.Input.Search|在财务人员输入关键词并请求查找账户的信息时，系统执行查询账户功能，参见Account.Search|
|Account.Input.End|在财务人员请求退出账户管理时，系统执行退出银行账户管理的相关步骤，参见Account.End|
|Account.Add|系统在界面显示已输入的新增的账户信息|
|Account.Add.Input|系统允许财务人员输入新增的账户信息|
|Account.Add.Error|当账户输入错误(为空或已经存在时)，系统提示无法登录|
|Account.Add.Confirm|在财务人员确认增加账户后，系统添加账户，并更新账户信息|
|Account.Add.Cancel|系统允许用户取消增加账户的操作|
|Account.Add.Success|系统提示用户增加账户成功并返回银行账户管理功能|
|Account.Remove|系统从系统中获取并显示选定账户的的信息|
|Account.Remove.Confirm|在财务人员确定删除账户后，系统移除此账户相关信息|
|Account.Remove.Cancel|系统允许财务人员取消删除账户|
|Account.Remove.Success|系统提示删除账户成功并返回银行账户管理功能|
|Account.Remove.Invalid|系统提示所选账户余额不为0，无法删除|
|Account.Modify|系统显示账户的名称和余额|
|Account.Modify.Input|系统允许用户输入新的账户名称|
|Account.Modify.Error|当账户输入错误(为空或已经存在)时，系统提示无法登录|
|Account.Modify.Confirm|在财务人员确定修改账户之后，系统修改相应账户信息并更新|
|Account.Modify.Cancel|系统允许财务人员中途取消修改账户|
|Account.Modify.Success|系统提示修改账户成功|
|Account.Search.Input|系统允许财务人员输入名称|
|Account.Search.Error|输入非法或者财务账户不存在时，系统返回查找账户的初始界面|
|Account.Search.Show|在财务人员确定查询后，系统显示账户的名称以及余额|
|Account.Quit|系统返回财务人员登录成功界面|



### 3.2.13 用例13 制定收付款单

#### 3.2.13.1 特性描述
经过识别和授权之后的财务人员，需要建立收付款单记录财务往来。  
优先度=高

#### 3.2.13.2 刺激/响应序列
刺激：财务人员申请建立一份收款单/付款单（选择单据类型）  
响应：系统显示一份空白的收款单/付款单（根据财务人员的选择）  
刺激：财务人员输入相关信息  
响应：系统显示已经填写的信息  
刺激：财务人员选择删除选中的转账条目信息  
响应：系统返回更新后的转账条目列表  
刺激：财务人员填写的条目信息为空
响应：系统提示错误  
刺激：财务人员确认提交单据  
响应：系统保存单据并显示提交成功  
刺激：财务人员选择保存该单据  
响应：系统保存该单据  
刺激：财务人员选择取消填写该单据  
响应：系统删除该单据  
刺激：财务人员选择退出制定收付款单    
响应：系统返回财务人员登录成功界面  

#### 3.2.13.3 相关功能需求
|BillCreate.Start|系统开始制定收付款单的操作|
|:---|:---|
|BillCreate.Start.Choose|系统允许财务人员选择单据类别(收款单/付款单)|
|BillCreate.Start.Show|系统显示一份新的单据，并允许财务人员操作|
|BillCreate.Input|系统允许财务人员输入单据信息|
|BillCreate.Input.InfoClient|系统允许财务人员添加客户信息|
|BillCreate.Input.InfoSingle|系统允许财务人员输入单项转账信息(银行账户、转账金额、备注)|
|BillCreate.Input.NewOne|系统允许财务人员增加一项转账信息|
|BillCreate.Input.DeleteOne|系统允许财务人员删除一项转账信息|
|BillCreate.Input.Error|系统提示存在输入的条目信息为空|
|BillCreate.Input.Show|系统显示已经输入的单据信息，并自动生成相关信息|
|BillCreate.Input.Save|系统允许财务人员保存单据|
|BillCreate.Input.Confirm|在财务人员确认建立收款单后，系统保存收款单并设为待审批|
|BillCreate.Input.Cancel|在财务人员选择撤销单据后后，系统删除该单据|
|BillCreate.Quit|系统返回财务人员登录成功界面|


### 3.2.14 用例14 制定现金费用单
#### 3.2.14.1 特性描述
经过识别和授权的财务人员，需要为了管理报销等现金操作而制定现金费用单。   
优先级=高 

#### 3.2.14.2 刺激/响应序列
刺激：财务人员向系统申请建立一份新的现金费用单   
响应：系统显示一份空白的现金费用单  
刺激：财务人员输入相关信息  
响应：系统显示已经填写的内容  
刺激：财务人员填写的条目信息为空
响应：系统提示错误
刺激：财务人员选择删除选中的条目信息  
响应：系统返回更新后的条目列表  
刺激：财务人员确认建立现金费用单  
响应：系统保存现金费用单并显示建立成功消息
刺激：财务人员选择保存该单据  
响应：系统保存该单据   
刺激：财务人员选择取消填写该单据  
响应：系统删除该单据    
刺激：财务人员选择退出制定现金费用单    
响应：系统返回财务人员登录成功界面 

#### 3.2.14.3 相关功能需求
|CashBillCreate.Start|系统开始制定现金费用单的操作|
|:---|:---|
|CashBillCreate.Start.Show|系统显示一份空白的现金费用单，并允许财务人员操作|
|CashBillCreate.Input|系统允许财务人员输入现金费用单信息|
|CashBillCreate.Input.InfoAccount|系统允许财务人员指定银行账户|
|CashBillCreate.Input.InfoSingle|系统允许财务人员输入单项条目信息(条目名、金额、备注)|
|CashBillCreate.Input.NewOne|系统允许财务人员增加一项条目信息|
|CashBillCreate.Input.DeleteOne|系统允许财务人员删除一项条目信息|
|CashBillCreate.Input.Show|系统显示已经输入的现金费用单信息，并自动生成相关信息|
|CashBillCreate.Input.Error|系统提示存在输入的条目信息为空|
|CashBillCreate.Input.Save|系统允许财务人员保存现金费用单|
|CashBillCreate.Input.Confirm|在财务人员确认建立现金费用单后，系统保存现金费用单并设为待审批|
|CashBillCreate.Input.Cancel|在财务人员选择撤销单据后，系统删除该单据|
|CashBillCreate.Quit|系统返回财务人员登录成功界面|


### 3.2.15 用例15 查看销售明细表
#### 3.2.15.1 特性描述
经过识别和授权的财务人员或者总经理需要了解公司近段时间的销售状况。    
优先级=中
#### 3.2.15.2 刺激/响应序列
刺激：财务人员或者总经理选择查看销售明细表  
响应：系统显示筛选条件选择界面  
刺激：财务人员或者总经理设置相关筛选条件  
响应：系统显示符合条件的筛选记录  

刺激：财务人员或者总经理选择导出为Excel  
响应：系统将统计结果导出到默认位置并提示导出成功  

刺激：财务人员或总经理选择退出查看销售明细表  
响应：系统返回操作人员登陆成功界面  

#### 3.2.15.3 相关功能需求
|Statistic.Start|系统允许财务人员或者总经理选择查看销售明细表|
|---|---|
|Statistic.SellDetail.Choose|系统允许财务人员或者总经理选择选择筛选条件，包括时间区间、商户名、客户、业务员、仓库|
|Statistic.SellDetail.Confirm|系统允许财务人员或者总经理确认所选择的时间区间|
|Statistic.SellDetail.Show|系统显示筛选条件下所有的销售出货类单据|
|Statistic.SellDetail.Export|系统允许财务人员或者总经理导出表格|
|Statistic.Quit|系统返回财务人员或总经理登录成功界面|


### 3.2.16 用例16 查看经营状况表
#### 3.2.16.1 特性描述
经过识别和授权的财务人员或者总经理需要了解公司近段时间的经营状况。    
优先级=中
#### 3.2.16.2 刺激/响应序列
刺激：财务人员或者总经理选择查看经营情况表  
响应：系统提示选择时间区间  
刺激：财务人员或者总经理设置时间区间  
响应：系统显示所选时间区间内的总收入、总支出、利润  

刺激：财务人员或者总经理选择导出为Excel  
响应：系统将统计结果导出到默认位置并提示导出成功  

刺激：财务人员或总经理选择退出查看经营情况表  
响应：系统返回操作人员登陆成功界面  

#### 3.2.16.3 相关功能需求
|Statistic.State|系统允许财务人员或者总经理选择查看经营状况表|
|---|---|
|Statistic.State.Choose|系统允许财务人员或者总经理选择时间区间|
|Statistic.State.Confirm|系统允许财务人员或者总经理确认所选择的时间区间|
|Statistic.State.Show|系统显示此时间区间内的收入、支出和利润|
|Statistic.State.Export|系统允许财务人员或者总经理导出表格|
|Statistic.Quit|系统返回财务人员或总经理登录成功界面|

### 3.2.17 用例17 查看经营历程表
#### 3.2.17.1 特性描述
经过识别和授权的财务人员或总经理需要查看公司一段时间内所产生的所有单据，其中仅财务人员可以对单据进行红冲（并复制）操作    
优先级=中
#### 3.2.17.2 刺激/响应序列
刺激：财务人员或者总经理选择查看经营历程表  
响应：系统提示选择筛选条件  
刺激：财务人员或者总经理设置筛选条件  
响应：系统显示所选时间区间内的符合筛选条件的所有单据  
刺激：财务人员或者总经理选择一张单据并进行查看操作  
响应：系统显示该单据的具体内容  

刺激：财务人员选择一张单据并进行红冲操作  
响应：系统生成一个一模一样但是仅仅把数量取负数的单子并入账   
刺激：财务人员选择一张单据并进行红冲并复制操作  
响应：系统在红冲操作基础上新建以所选单据为模板的草稿单  
刺激：财务人员选择取消当前操作  
响应：系统退回到当前操作前的状态  

刺激：财务人员或总经理选择退出查看经营历程表  
响应：系统返回操作人员登陆成功界面  

#### 3.2.17.3 相关功能需求
|Process.Start|系统允许财务人员或者总经理查看经营历程表|
|:---|:---|
|Process.Choose|系统允许财务人员或者总经理选择筛选条件，包括时间区间，单据类型，客户，业务员，仓库|
|Process.Show|系统显示符合条件的单据列表|
|Process.ChooseOne|系统允许财务人员或者总经理选择一张单据|
|Process.ChooseOne.Show|系统显示单据的具体内容|
|Process.Reverse|系统允许财务人员对某一单据进行红冲操作|
|Process.ReverseCopy|系统允许财务人员对某一单据进行红冲操作并显示一张同样的草稿单|
|Process.ReverseCopy.Edit|系统允许财务人员对草稿单进行编辑|
|Process.ReverseCopy.Confirm|系统允许财务人员提交编辑好的草稿单，系统保存单据|
|Process.ReverseCopy.Cancel|系统允许财务人员取消草稿单回到之前的状态|
|Process.Quit|系统返回财务人员或总经理登录成功界面|
|Process.Quit.Timeout|当财务人员或总经理一个小时没有任何操作时，系统自动登出账号|

### 3.2.1 用例18 期初建账
#### 3.2.18.1 特性描述
经过识别和授权的财务人员为了新建一套账需要期初建账    
优先级=高
#### 3.2.18.2 刺激/响应序列
刺激：财务人员选择期初建账  
响应：系统检查客户信息、商品信息、银行账户信息是否完整，若不完整提示无法期初建账。  
刺激：财务人员确认客户信息、商品信息、银行账户信息  
响应：系统建立一套新账并初始化系统  

刺激：财务人员选择取消期初建账
响应：系统退回到当前操作前的状态

刺激：财务人员选择查看期初信息  
响应：系统显示期初信息  

刺激：财务人员选择退出期初建账  
响应：系统返回财务人员登陆成功界面  
#### 3.2.18.3 相关功能需求
|Start.Input|系统允许财务人员输入期初建账所需信息|
|:--|:--|
|Start.Input.ItemInfo|系统允许财务人员输入商品信息|
|Start.Input.AccountInfo|系统允许财务人员输入银行账户信息|
|Start.Input.ClientInfo|系统允许财务人员输入客户信息|
|Start.Input.Confirm|在财务人员确认输入信息无误后，系统记录账户信息|
|Start.Input.Cancel|系统允许财务人员取消期初建账|
|Start.Input.Success|系统提示建账成功|
|Start.Show|在财务人员选择查看期初信息后，系统显示账户初始状态信息|
|Start.Quit|系统返回财务人员登录成功界面|
|Start.Quit.Timeout|当财务人员两个小时没有任何操作时，系统自动登出账号|

### 3.2.19 用例19 查看日志
#### 3.2.19.1 特性描述
财务人员或者总经理为了了解进销存系统使用的历史记录需要查看日志   
优先级=低 

#### 3.2.19.2 刺激/响应序列
刺激：财务人员或者总经理选择要查询系统日志的时间段  
响应：系统显示该时间段内的系统日志信息   


刺激：财务人员或总经理选择退出查看日志  
响应：系统返回操作人员登陆成功界面  

#### 3.2.19.3 相关功能需求
|Log.Choose.Date|系统允许财务人员或总经理选择一个时间段|
|:---|:---|
|Log.Choose.Confirm|系统允许财务人员或总经理确认时间段的选择|
|Log.Choose.Cancel|系统允许财务人员或总经理取消日志查询|
|Log.Show|系统显示选择的时间段内日志|
|Log.Quit|系统返回财务人员或总经理登录成功界面|

### 3.2.20 用例20 审批单据
#### 3.2.20.1 特性描述
经过识别和授权的总经理对所有类型的单据（包括库存赠送单、库存报溢单、库存报损单、进货单、进货退货单、销售单、销售退货单、收款单、付款单）进行管理，包括对单据的查看、修改、审批和批量审批。  
优先级=高  

#### 3.2.20.2 刺激/响应序列

刺激：总经理选择查看单据  
响应：系统显示筛选条件选择界面  
刺激：总经理设置相关筛选条件  
响应：系统显示符合条件的单据列表  

刺激：总经理选择查看所有单据  
响应：系统显示所有的单据及单据的审批状态  

刺激：总经理选择具体的某个单据条目  
响应：系统显示被选中的单据的具体内容  
刺激：总经理选择审批该单据  
响应：系统显示确认审批界面并等待确认  
刺激：总经理选择确认审批  
响应：系统显示审批成功并更新单据状态  
刺激：总经理选择的单据经过系统判断不能通过审批
响应：系统显示不通过原因
刺激：总经理选择从具体的单据条目返回单据列表界面  
响应：系统显示单据列表界面  

刺激：总经理选择修改被选中单据的具体内容  
响应：系统显示修改后的单据内容并等待确认  
刺激：总经理确认更改  
响应：系统显示修改成功信息并更新该单据内容  

刺激：总经理选择多条单据，对其进行批量通过   
响应：系统对被选中的单据依次进行审批，显示审批成功，回到单据列表页面并更新单据状态   
刺激：总经理选中的某条单据经判断不能通过审批    
响应：系统显示未通过审批单据的ID，结束批量审批    

刺激：总经理选择退出单据审批  
响应：系统返回总经理登录成功界面  

刺激：总经理选择取消当前操作  
响应：系统退回到当前操作前的状态  

#### 3.2.20.3 相关功能需求
|:--|:--|
|Approval.Start.Check<br/>Approval.Start.Select<br/>Approval.Start.Cancel|系统允许总经理请求查看待审批的单据列表<br/>系统允许总经理根据条件筛选单据，详见Approval.Select<br/>系统允许总经理取消审批操作，详见Approval.Quit|
|Approval.Select<br/>Approval.Select.Show<br/>Approval.Select.Show.Cancel|系统允许总经理从待审批列表中选择一张单据进行审批<br/>系统显示此单据的详细内容<br/>系统允许总经理退出查看单据详情|
|Approval.Approve<br/>Approval.Approve.Error<br/>Approval.Approve.ApproveMany|系统允许总经理通过审批单据<br/>系统经过逻辑判断确认选择的单据不能通过审批，提示错误信息<br/>系统允许总经理对多张单据进行批量通过，对其中每一张具体单据的通过，详见Approval.Approve|
|Approval.Edit<br/>Approval.Edit.Confirm<br/>Approval.Edit.Cancel|系统允许总经理修改单据<br/>系统允许总经理确认修改单据，详见Approval.Update<br/>系统允许总经理确认取消修改单据，返回审阅和修改界面|
|Approval.Disapprove<br/>Approval.Disapprovemany|系统允许总经理不通过审批单据<br/>系统允许总经理对多张单据进行批量不通过，对其中每一张具体单据的不通过，详见Approval.Disapprove|
|Approval.Update<br/>Approval.Update.Close<br/>Approval.Update.Show|系统更新单据的属性状态<br/>系统在更新完单据信息后自动关闭本次审批单据任务，详见Approval.Close<br/>系统显示单据更新后的审阅和修改界面|
|Approval.Quit<br/>|系统返回总经理登录成功界面|

### 3.2.21 用例21 制定促销策略
#### 3.2.21.1 特性描述
经过识别和授权的总经理  
对所有的促销策略进行管理，包括查看、修改、删除已有促销策略，新建促销策略。  
优先级=高  

#### 3.2.21.2 刺激/响应序列

刺激：总经理选择查看已有促销策略  
响应：系统显示筛选条件选择界面  
刺激：总经理设置相关筛选条件  
响应：系统显示符合条件的已有促销策略列表  

刺激：总经理选择查看所有促销策略  
响应：系统显示所有的已有促销策略的列表  

刺激：总经理选择具体的某个促销策略条目  
响应：系统显示被选中的促销策略的具体内容  

刺激：总经理选择删除该条目的促销策略  
响应：系统显示信息等待确认是否删除  
刺激：总经理确认删除  
响应：系统显示删除成功并返回跳转到该促销策略详情界面前的促销策略列表界面  

刺激：总经理选择修改被选中促销策略的具体内容  
响应：系统显示修改后的促销策略内容并等待确认  
刺激：总经理确认修改  
响应：系统显示修改成功并显示更新后的促销策略的内容  
刺激：总经理选择从具体的促销策略详情返回促销策略列表界面  
响应：系统显示跳转到该促销策略详情界面前的促销策略列表界面  

刺激：总经理选择新建促销策略  
响应：系统显示所要制定的促销策略类型筛选界面（包括针对不同级别用户设计的促销策略、制定特价包、针对不同总价设计的促销策略）  
刺激：总经理选择所需制定的促销策略的类型  
响应：系统显示该类型促销策略单的空白模板  
刺激：总经理填写促销策略单  
响应：系统显示填写完的促销策略单并等待保存  
刺激：总经理确认保存  
响应：系统显示新建成功并显示新建的促销策略的详细内容  

刺激：总经理选择删除促销策略  
响应：系统在促销策略列表前显示出可供勾选的勾选框  
刺激：总经理勾选出所要删除的促销策略的条目  
响应：系统显示勾选情况并等待确认是否删除  
刺激：总经理确认删除  
响应：系统显示删除成功并返回更新后的促销策略列表界面  

刺激：总经理选择退出制定促销策略  
响应：系统返回总经理登录成功界面  

刺激：总经理选择取消当前操作  
响应：系统退回到当前操作前的状态  

#### 3.2.21.3 相关功能需求
|:--|:--|
|Strategy.Start.Check<br/>Strategy.Start.Show<br/>Strategy.Start.Cancel|系统允许总经理申请查看促销策略表<br/>在总经理申请查看促销策略表后，系统显示所有已有的促销策略<br/>系统允许总经理结束查看操作，详见Strategy.End.Cancel|
|Strategy.Select<br/>Strategy.Select.Show<br/>Strategy.Select.Cancel|系统允许总经理从已有促销策略中选择一个条目进行查看<br/>在总经理选择所要查看的条目后，系统显示此条目的具体内容<br/>系统允许总经理取消查看具体条目的操作，返回条目列表界面|
|Strategy.Edit<br/>Strategy.Edit.Confirm<br/>Strategy.Edit.Cancel|在总经理查看具体的某一促销策略的条目后，系统允许总经理修改该条目内容<br/>系统允许总经理确认修改促销策略，详见Strategy.UpdateEntry<br/>系统允许总经理确认取消修改促销策略，返回该条目详情界面|
|Strategy.Delete<br/>Strategy.Delete.Confirm<br/>Strategy.Delete.Cancel|在总经理查看具体的某一促销策略的条目后，系统允许总经理删除该条目<br/>系统允许总经理确认删除该条目，详见Strategy.Update<br/>系统允许总经理确认取消删除该条目，返回条目列表界面|
|Strategy.Add<br/>Strategy.Add.Confirm<br/>Strategy.Add.Cancel|系统允许总经理申请新增一条促销策略<br/>系统允许总经理确认新增一条促销策略，详见Strategy.Update<br/>系统允许总经理确认取消新增该条促销策略，返回条目列表界面|
|Strategy.Update<br/>Strategy.Update.Close<br/>Strategy.Update.Show|系统更新促销促销策略的列表<br/>系统在更新完单据信息后自动关闭本次制定促销策略任务，详见Strategy.Close<br/>系统显示促销策略更新后的条目列表界面|
|Strategy.UpdateEntry<br/>Strategy.UpdateEntry.Show<br/>Strategy.UpdateEntry.Close|系统更新促销策略的具体内容<br/>系统显示促销策略更新后的该条目详情界面<br/>系统允许总经理结束对条目详情的查看，回到条目列表界面|
|Strategy.Close<br/>Strategy.Close.Next|系统关闭本次制定促销策略任务<br/>系统关闭本次制定促销策略任务，开始新的制定促销策略任务|
|Strategy.Quit<br/>|系统允许总经理结束制定促销策略的任务，回到功能选择页面|

### 3.2.22 用例22 用户管理  
#### 3.2.22.1 特性描述  
通过身份验证的系统管理员对系统的用户及其信息进行增删改查操作。   
优先级 = 高  

#### 3.2.22.2 刺激/响应序列  
刺激：系统管理员请求查看用户列表  
响应：系统显示用户信息列表  
刺激：系统管理员请求添加用户  
响应：系统显示添加用户的页面  
刺激：系统管理员输入新用户信息并确认  
响应：系统更新用户列表并显示  
刺激：系统管理员请求删除用户  
响应：系统要求管理员的确认  
刺激：系统管理员确认删除  
响应：系统更新相关信息并显示  
刺激：系统管理员请求修改某一用户信息  
响应：系统显示修改信息页面  
刺激：系统管理员填完信息并确认  
响应：系统更新相关信息并显示  
刺激：系统管理员请求搜索用户  
响应：系统显示查询页面  
刺激：系统管理员输入用户编号或关键字，点击查询  
响应：系统显示查询结果   
刺激：系统管理员输入的用户编号或关键字无效
响应：系统提示错误，询问是否添加
刺激：系统管理员选择退出用户管理   
响应：系统返回用户管理员登录成功界面    
刺激：系统管理员选择取消当前操作  
响应：系统退回到当前操作前的状态 

#### 3.2.22.3 相关功能需求  
|编号|需求描述与度量|
|:---|:---|
|UserManage.View|系统允许系统管理员打开用户列表|
|UserManage.View.Show|系统显示用户列表|
|UserManage.View.Add|系统允许系统管理员添加用户，详见UserManage.Add|
|UserManage.View.Delete|系统允许系统管理员删除用户，详见UserManage.Delete|
|UserManage.View.Modify|系统允许系统管理员修改用户，详见UserManage.Modify|
|UserManage.View.Search|系统允许系统管理员查询用户，详见UserManage.Search|
|UserManage.Add.Input|系统要求系统管理员输入新增用户信息|
|UserManage.Add.Cancel|系统管理员取消，系统取消操作|
|UserManage.Add.Return|系统显示添加成功，更新用户列表|
|UserManage.Delete.Confirm|系统要求系统管理员确认删除|
|UserManage.Delete.Cancel|系统管理员取消，系统取消操作|
|UserManage.Delete.OK|系统删除用户，更新用户列表|
|UserManage.Modify.Input|系统要求系统管理员输入选中用户的新信息|
|UserManage.Modify.Cancel|系统管理员取消，系统取消操作|
|UserManage.Modify.Return|系统显示操作成功，更新用户信息|
|UserManage.Search.Input|系统要求系统管理员输入用户编号或关键字|
|UserManage.Search.Show|系统显示相关用户的详细信息|
|UserManage.Search.NotFound|系统提示错误，询问是否添加|
|UserManage.Search.NotFound.Cancel|系统管理员取消，系统退回原页面|
|UserManage.Search.NotFound.OK|系统管理员确认，系统进入添加流程，详见UserManage.Add|
|UserManage.Search.Delete|系统允许管理员在搜索结果页面删除用户，详见UserManage.Delete|
|UserManage.Search.Quit|系统管理员请求退出搜索，系统退出搜索页面|
|UserManage.Quit|系统允许系统管理员返回登录成功界面|

### 3.2.23 用例23 修改个人信息  
#### 3.2.23.1 特性描述  
通过身份验证的任意用户对自身的信息进行修改操作。   
优先级 = 低  

#### 3.2.23.2 刺激/响应序列 
刺激：操作员请求修改个人信息任务  
响应：系统显示用户详细信息窗口  
刺激：操作员修改个人信息  
响应：系统显示修改后的用户信息  
刺激：操作员确认修改  
响应：系统更新修改后的个人信息  
刺激：操作员取消修改个人信息  
响应：系统返回操作员登录成功界面  

#### 3.2.23.3 相关功能需求  
|编号|需求描述与度量|
|:---|:---|
|Modify.View|系统允许操作员打开个人信息列表|
|Modify.View.Show|系统显示个人信息列表|
|Modify.View.Change|系统允许操作员修改个人信息，详见Modify.Change|
|Modify.Change.Input|系统允许操作员输入要更改的信息|
|Modify.Change.Confirm|系统要求操作员确认更改|
|Modify.Change.Update|系统更新操作员个人信息|
|Modify.Change.Cancel|系统允许操作员取消修改个人信息|
|Modify.Quit|系统允许操作员返回登录成功界面|

### 3.2.24 用例24 邮件管理  
#### 3.2.24.1 特性描述  
通过身份验证的任意用户可以进行收发邮件工作。   
优先级 = 高  

#### 3.2.24.2 刺激/响应序列 
刺激：操作员请求进入邮件系统  
响应：系统显示未读和已读邮件  
刺激：操作员选择新建邮件  
响应：系统显示填写邮件窗口  
刺激：操作员选择收件用户，填写邮件内容  
响应：系统显示收件用户编号、姓名以及操作员填写的内容  
刺激：操作员确认发送邮件  
响应：系统发送邮件给收件用户  
刺激：操作员取消发送邮件  
响应：系统返回收件箱界面  
刺激：操作员选择查看未读邮件  
响应：系统显示邮件详情  
刺激：操作员选择将收件箱所有邮件标为已读  
响应：系统更新收件箱邮件状态  

#### 3.2.24.3 相关功能需求  
|编号|需求描述与度量|
|:---|:---|
|Mail.View|系统允许操作员进入邮件系统|
|Mail.View.Show|系统显示收件箱|
|Mail.View.Send|系统允许操作员发送邮件给其他用户，详见Mail.Send|
|Mail.View.Check|系统允许操作员查看收件箱内的邮件，详见Mail.Check|
|Mail.View.AllCheck|系统允许操作员将收件箱所有邮件标为已读|
|Mail.Send.Input|系统允许操作员选择收件人，输入要发送的内容|
|Mail.Send.Confirm|系统要求操作员确认发送|
|Mail.Send.Update|系统将邮件发给收件用户|
|Mail.Send.Cancel|系统允许操作员取消发送邮件|
|Mail.Check.Choose|系统允许操作员选择要查看的邮件|
|Mail.Check.Show|系统显示选中邮件的内容|
|Mail.Check.Show.Cancel|系统允许操作员关闭当前邮件窗口，回到收件箱|
|Mail.Check.Update|系统允许将阅读完成的未读邮件状态改为已读|
|Mail.Quit|系统允许操作员返回登录成功界面|

## 3.3 非功能需求
### 3.3.1 安全性
* Safety1：系统应该只允许经过验证和授权的用户访问。
* Safety2：系统应该按照用户身份验证用户访问权限：库存管理人员、进货销售人员、财务人员、总经理、系统管理员具有访问权限，其他身份的用户没有访问权限。
* Safety3：系统中有一个默认的管理员帐户，该账户只允许管理员用户修改口令。

### 3.3.2 可维护性
* Modifiability1：在系统的数据格式发生变化时，系统能够在四人一天内完成。

### 3.3.3 易用性
* Usability1：使用系统1个月的进货销售人员、财务人员和库存管理人员填写单据的效率要达到10张单据/分钟。

### 3.3.4 可靠性
* Reliability1:在客户端与服务器通信时，如果网络故障，系统不能出现故障。
* Reliability1.1：客户端应该检测故障，并尝试重新连接网络3次，每次15秒
* Reliability1.1.1：重新连接后，客户端应该继续之前的工作
* Reliability1.1.2：如果重新连接不成功，客户端应该等待5分钟后再次尝试重新连接
* Reliability1.1.2.1：重新连接后，客户端应该继续之前的工作
* Reliability1.1.2.2：如果重新连接仍然不成功，客户端报警。

### 3.3.5 业务规则
* BR1:商品存在多种分类，分类下还可以有子分类。只有叶节点的分类才能添加商品，一旦分类下有商品就不能在该分类下再添加子分类。
* BR2:进货单单据编号格式为JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号  
进退货单单据编号格式为JHTHD-……  
销售单单据编号格式为XSD-yyyyMMdd-xxxxx  
销售退货单单据编号格式为XSTHD-……  
收款单单据编号格式为SKD-yyyyMMdd-xxxxx  
付款单单据编号格式为FKD-yyyyMMdd-xxxxx  
现金费用单单据编号格式为XJFYD-yyyyMMdd-xxxxx  
* BR3.1:总经理可以制定针对不同总价的促销策略（赠品、 赠送代金劵)<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;触发价格折让的初始档为1000,2000,5000；分别赠送200,500,1000的代金券，此后每增加5000元消费多赠送1000元代金券<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;触发赠品赠送的初始档为200,500,1000；分别赠送价值50，100，200元的赠品。1000元以上总价每增加1000元，赠送的赠品的价格增加100元
* BR3.2:总经理可以制定组合商品降价的特价包<br/>
* BR3.3:总经理可以针对不同级别的用户制定促销策略（赠品、价格折让、 赠送代金劵）<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;待定
	
## 3.4 约束
* IC1:在开发过程中缺少高端服务器，需要在普通计算机上搭建服务器。
* IC2：在开发过程中缺少可用的打印机，需要使用文件系统模拟打印机。
* IC3：系统要求在网络上分布为一个服务器和多个客户端。

## 3.5 数据需求
### 3.5.1 数据定义
* DR1：系统删除之后的单据数据、库存数据、商品数据和用户数据仍然要继续存储3个月时间，以保证历史数据显示的正确性。
* DR2：系统至少能够存储五年的数据信息。

### 3.5.2 默认数据
默认数据用于以下两种情况：  
1. 系统中新增数据时。  
2. 编辑数据时不小心将相关内容清空时。  
  
* Default1：操作时间默认为当天。
* Default2：费用款项默认为0.
* Default3：操作人员工号默认为当前登录用户。
* Default4：单据审核状态默认为未审批

### 3.5.3 数据格式要求
* Format1：
进退货单单据编号格式为JHTHD-……  
销售单单据编号格式为XSD-yyyyMMdd-xxxxx  
销售退货单单据编号格式为XSTHD-……  
收款单单据编号格式为SKD-yyyyMMdd-xxxxx  
付款单单据编号格式为FKD-yyyyMMdd-xxxxx  
现金费用单单据编号格式为XJFYD-yyyyMMdd-xxxxx  

* Format2：数量的格式必须是整数。
* Format3：费用款项的格式必须是大于等于0且精确到小数点后2位的浮点数，单位为元。

## 3.6 其他需求
### 3.6.1 安装需求
* Install1：在安装系统时，要初始化用户、商品、库存、单据等重要数据。
* Install2：系统投入使用时，要对用户进行1个星期的集中培训。

## 4 需求分析模型
## 4.1 全局概念类图
![](doc/img/ConceptClassDiagrams/00_全局_概念类图.png)  
## 4.2 各用例概念类图
### 4.2.1 用例1 单据管理
![](doc/img/ConceptClassDiagrams/01_单据管理_概念类图.png)
### 4.2.2 用例2 商品分类管理
![](doc/img/ConceptClassDiagrams/02_商品分类管理_概念类图.png)
### 4.2.3 用例3 商品管理
![](doc/img/ConceptClassDiagrams/03_商品管理_概念类图.png)
### 4.2.4 用例4 库存管理
![](doc/img/ConceptClassDiagrams/04_库存管理_概念类图.png)
### 4.2.5 用例5 库存调整
![](doc/img/ConceptClassDiagrams/05_库存调整_概念类图.png)
### 4.2.6 用例6 客户管理
![](doc/img/ConceptClassDiagrams/06_客户管理_概念类图.png)
### 4.2.7 用例7 制定进货单
![](doc/img/ConceptClassDiagrams/07_制定进货单_概念类图.png)
### 4.2.8 用例8 制定进货退货单
![](doc/img/ConceptClassDiagrams/08_制定进货退货单_概念类图.png)
### 4.2.9 用例9 制定销售单
![](doc/img/ConceptClassDiagrams/09_制定销售单_概念类图.png)
### 4.2.10 用例10 制定销售退货单
![](doc/img/ConceptClassDiagrams/10_制定销售退货单_概念类图.png)
### 4.2.11 用例11 银行账户管理
![](doc/img/ConceptClassDiagrams/11_银行账户管理_概念类图.png)
### 4.2.12 用例12 制定收付款单
![](doc/img/ConceptClassDiagrams/12_制定收付款单_概念类图.png)
### 4.2.13 用例13 制定现金费用单
![](doc/img/ConceptClassDiagrams/13_制定现金费用单_概念类图.png)
### 4.2.14 用例14 查看销售明细表
![](doc/img/ConceptClassDiagrams/14_查看销售明细表_概念类图.png)
### 4.2.15 用例15 查看经营状况表
![](doc/img/ConceptClassDiagrams/15_查看经营状况表_概念类图.png)
### 4.2.16 用例16 查看经营历程表
![](doc/img/ConceptClassDiagrams/16_查看经营历程表_概念类图.png)
### 4.2.17 用例17 期初建账
![](doc/img/ConceptClassDiagrams/17_期初建账_概念类图.png)
### 4.2.18 用例18 查看日志
![](doc/img/ConceptClassDiagrams/18_查看日志_概念类图.png)
### 4.2.19 用例19 审批单据
![](doc/img/ConceptClassDiagrams/19_审批单据_概念类图.png)
### 4.2.20 用例20 制定促销策略
![](doc/img/ConceptClassDiagrams/20_制定促销策略_概念类图.png)
### 4.2.21 用例21 用户管理
![](doc/img/ConceptClassDiagrams/21_用户管理_概念类图.png)  

## 4.3 各用例系统顺序图
### 4.3.1 用例1 单据管理
![](doc/img/SequenceDiagrams/01_单据管理_系统顺序图.png)
### 4.3.2 用例2 商品分类管理
![](doc/img/SequenceDiagrams/02_商品分类管理_系统顺序图.png)
### 4.3.3 用例3 商品管理
![](doc/img/SequenceDiagrams/03_商品管理_系统顺序图.png)
### 4.3.4 用例4 库存查看
![](doc/img/SequenceDiagrams/04_库存管理_系统顺序图.png)
### 4.3.5 用例5 库存盘点
![](doc/img/SequenceDiagrams/04_库存管理_系统顺序图.png)
### 4.3.6 用例6 库存调整
![](doc/img/SequenceDiagrams/05_库存调整_系统顺序图.png)
### 4.3.7 用例7 客户管理
![](doc/img/SequenceDiagrams/06_客户管理_系统顺序图.png)
### 4.3.8 用例8 制定进货单
![](doc/img/SequenceDiagrams/07_制定进货单_系统顺序图.png)
### 4.3.9 用例9 制定进货退货单
![](doc/img/SequenceDiagrams/08_制定进货退货单_系统顺序图.png)
### 4.3.10 用例10 制定销售单
![](doc/img/SequenceDiagrams/09_制定销售单_系统顺序图.png)
### 4.3.11 用例11 制定销售退货单
![](doc/img/SequenceDiagrams/10_制定销售退货单_系统顺序图.png)
### 4.3.12 用例12 银行账户管理
![](doc/img/SequenceDiagrams/11_银行账户管理_系统顺序图.png)
### 4.3.13 用例13 制定收付款单
![](doc/img/SequenceDiagrams/12_制定收付款单_系统顺序图.png)
### 4.3.14 用例14 制定现金费用单
![](doc/img/SequenceDiagrams/13_制定现金费用单_系统顺序图.png)
### 4.3.15 用例15 查看销售明细表
![](doc/img/SequenceDiagrams/14_查看销售明细表_系统顺序图.png)
### 4.3.16 用例16 查看经营状况表
![](doc/img/SequenceDiagrams/15_查看经营状况表_系统顺序图.png)
### 4.3.17 用例17 查看经营历程表
![](doc/img/SequenceDiagrams/16_查看经营历程表_系统顺序图.png)
### 4.3.18 用例18 期初建账
![](doc/img/SequenceDiagrams/17_期初建账_系统顺序图.png)
### 4.3.19 用例19 查看日志
![](doc/img/SequenceDiagrams/18_查看日志_系统顺序图.png)
### 4.3.20 用例20 审批单据
![](doc/img/SequenceDiagrams/19_审批单据_系统顺序图.png)
### 4.3.21 用例21 制定促销策略
![](doc/img/SequenceDiagrams/20_制定促销策略_系统顺序图.png)
### 4.3.22 用例22 用户管理
![](doc/img/SequenceDiagrams/21_用户管理_系统顺序图.png)

## 4.4 部分用例状态图
### 4.4.1 用例1 商品分类管理
![](doc/img/StateDiagrams/01_商品分类管理_状态图.png)  
### 4.4.2 用例2 商品管理
![](doc/img/StateDiagrams/02_商品管理_状态图.png)    
### 4.4.3 用例6 客户管理
![](doc/img/StateDiagrams/05_客户管理_状态图.png)  
### 4.4.4 用例7 制定进退货单
![](doc/img/StateDiagrams/06_制定进退货单_状态图.png)  
### 4.4.5 用例8 制定销售单
![](doc/img/StateDiagrams/07_制定销售单_状态图.png)  
### 4.4.6 用例9 制定销售退货单
![](doc/img/StateDiagrams/08_制定销售退货单_状态图.png)  
### 4.4.7 用例10 银行账户管理
![](doc/img/StateDiagrams/09_银行账户管理_状态图.png)  
### 4.4.8 用例11-12 制定收付款单
![](doc/img/StateDiagrams/10_制定收付款单_状态图.png)  
### 4.4.9 用例13 制定现金费用单
![](doc/img/StateDiagrams/11_制定现金费用单_状态图.png)  
### 4.4.10 用例14-17 查看统计分析
![](doc/img/StateDiagrams/12_查看统计分析_状态图.png)  
### 4.4.11 用例18 期初建账
![](doc/img/StateDiagrams/14_期初建账_状态图.png)   
### 4.4.12 用例20 审批单据
![](doc/img/StateDiagrams/16_审批单据_状态图.png)   